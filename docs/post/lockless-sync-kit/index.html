<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>在线服务的异步RPC延时控制和无锁异步任务同步组件 - Peacalm Notes - 双全的网站</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="李双全" />
  <meta name="description" content="一、关于延时 控制延时是保证在线服务可用性的必要手段 在线服务对延时敏感。一般对在线服务发起远程调用时，都会配有一个超时限制，一旦请求超时， 则认" />

  <meta name="keywords" content="lishuangquan, blog, software" />






<meta name="generator" content="Hugo 0.92.1" />


<link rel="canonical" href="https://peacalm.github.io/post/lockless-sync-kit/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css" integrity="sha256-&#43;ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="在线服务的异步RPC延时控制和无锁异步任务同步组件" />
<meta property="og:description" content="一、关于延时 控制延时是保证在线服务可用性的必要手段 在线服务对延时敏感。一般对在线服务发起远程调用时，都会配有一个超时限制，一旦请求超时， 则认" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://peacalm.github.io/post/lockless-sync-kit/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-18T19:04:20+08:00" />
<meta property="article:modified_time" content="2022-04-18T19:04:20+08:00" />

<meta itemprop="name" content="在线服务的异步RPC延时控制和无锁异步任务同步组件">
<meta itemprop="description" content="一、关于延时 控制延时是保证在线服务可用性的必要手段 在线服务对延时敏感。一般对在线服务发起远程调用时，都会配有一个超时限制，一旦请求超时， 则认"><meta itemprop="datePublished" content="2022-04-18T19:04:20+08:00" />
<meta itemprop="dateModified" content="2022-04-18T19:04:20+08:00" />
<meta itemprop="wordCount" content="2679">
<meta itemprop="keywords" content="多线程同步,异步,延时控制,RPC," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="在线服务的异步RPC延时控制和无锁异步任务同步组件"/>
<meta name="twitter:description" content="一、关于延时 控制延时是保证在线服务可用性的必要手段 在线服务对延时敏感。一般对在线服务发起远程调用时，都会配有一个超时限制，一旦请求超时， 则认"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Peacalm Notes - 双全的网站</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/post/">Archives</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/tags/">Tags</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/categories/">Categories</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/about/">About</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Peacalm Notes - 双全的网站
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/post/">Archives</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/tags/">Tags</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/categories/">Categories</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://peacalm.github.io/about/">About</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">在线服务的异步RPC延时控制和无锁异步任务同步组件</h1>
      
      <div class="post-meta">
        <time datetime="2022-04-18" class="post-time">
          2022-04-18
        </time>
        <div class="post-category">
            <a href="https://peacalm.github.io/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
            
          </div>
        

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#一关于延时">一、关于延时</a>
      <ul>
        <li><a href="#控制延时是保证在线服务可用性的必要手段">控制延时是保证在线服务可用性的必要手段</a></li>
        <li><a href="#rpc远程调用耗时的复杂性">RPC远程调用耗时的复杂性</a></li>
        <li><a href="#异步rpc是必要的">异步RPC是必要的</a></li>
      </ul>
    </li>
    <li><a href="#二关于同步">二、关于同步</a>
      <ul>
        <li><a href="#无锁同步">无锁同步</a></li>
        <li><a href="#异步任务同步">异步任务同步</a></li>
        <li><a href="#异步任务无锁同步组件c为例">异步任务无锁同步组件，C++为例</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h2 id="一关于延时">一、关于延时</h2>
<h3 id="控制延时是保证在线服务可用性的必要手段">控制延时是保证在线服务可用性的必要手段</h3>
<p>在线服务对延时敏感。一般对在线服务发起远程调用时，都会配有一个超时限制，一旦请求超时，
则认为本次请求失败，服务不可用。因此控制延时是保证在线服务可用性的必要手段。</p>
<h3 id="rpc远程调用耗时的复杂性">RPC远程调用耗时的复杂性</h3>
<p>网络环境是不可靠的，数据在网络中传输的耗时是不可控的，因此为了控制延时，
需要为每次socket发送和接受数据都配置一个超时限制。
而一次RPC远程调用可能需要执行多次socket请求，例如数据包很大、io状态不佳、需要重试等原因，
因此为单次socket请求设置的超时限制，并不能准确代表一次RPC远程调用的网络耗时。</p>
<p>因此，为了更准确控制超时，一些RPC框架内置了io线程池，采用异步方式进行socket网络请求，
超时控制会比同步模式准确一些。</p>
<p>不过，虽然异步请求是比同步请求模式更先进的控制超时的方式，但更复杂，
也引入了更多影响延时的因素和需要关注和调优的参数。
例如，异步模式虽然可以避免多次socket请求对超时控制的影响，但又引入了
io线程池的调度耗时、控制异步io超时的定时器的准确性等因素对总体RPC延时的影响。</p>
<p>再退一步，从业务客户端视角看，一次RPC远程调用的耗时，除了网络耗时，
还包括数据在本端（客户端）和远端（服务端）的序列化和反序列化耗时，当数据包过大时，
这一部分耗时和对CPU的消耗也是不能忽视的。</p>
<h3 id="异步rpc是必要的">异步RPC是必要的</h3>
<p>因此，使用异步RPC远程调用总是必要的，除了能使延时控制得更准确外，还可以并行执行多个RPC请求，
进一步降低延时，而并行执行一些相互独立的任务也是降低延时的非常重要的优化策略。</p>
<p>更进一步，除了RPC框架内置的异步网络请求模式外，还可以再退一层，站在业务的更大的视角上看，
在在线服务内建立线程池，用于执行异步任务，这些异步任务不仅可以包括RPC框架涵盖的网络请求，
还可以包含数据的序列化反序列化，以及业务上需要特殊处理的逻辑。
例如，假如一个业务上的异步任务其实内部需要先后访问两次远程服务，然后再做一些处理，
那么用一个业务上的异步任务给它一个整体上的超时，对业务上讲，控制延时将更准确。
或者，业务上的异步任务可以仅仅是对使用了同步RPC框架的一次RPC任务的封装，那么这个业务上设定的超时，
就包含了网络耗时、数据序列化反序列化耗时、业务特殊处理逻辑等所有步骤的耗时，
比单独使用RPC框架的超时，控制延时更准确。</p>
<h2 id="二关于同步">二、关于同步</h2>
<p>异步执行的程序之间总是需要同步的。</p>
<h3 id="无锁同步">无锁同步</h3>
<p>线程间同步一般常用锁，例如互斥锁、读写锁等，而&quot;无锁&quot;同步，一般就要直接使用原子标记，事实上，
锁的内部实现方式也是使用了原子标记。</p>
<h3 id="异步任务同步">异步任务同步</h3>
<p>业务上给每一个异步任务都设定一个预期的超时时间，主线程发送出一个或多个异步任务后，
等待一段时间——这个时间应该是这些异步任务超时时间的最大值——让这些任务并行执行一会儿，
然后需要判断异步任务执行得怎么样了，是已经成功了？或是已经失败了？或是还在执行中？
如果还在执行中，那么主线程可以给这个任务标记为&quot;已超时&quot;，
让这个超时任务不要再影响主线程，或进入超时任务的特殊处理方法。</p>
<p>异步任务成功或失败的标记信息，是任务线程发送给主线程的信号，
而任务已超时的信息，是主线程发送给任务线程的信号。
这些就涉及到线程间同步问题。</p>
<h3 id="异步任务无锁同步组件c为例">异步任务无锁同步组件，C++为例</h3>
<p>以下C++实现代码中 SyncKit类 就是一个简单的异步任务无锁同步组件，
它是主线程和异步任务线程共享的数据结构，分别为其定义了可调用成员方法。
主线程调用master_开头的方法，异步任务线程调用slave_开头的方法。</p>
<p>主线程使用方式很简单，发出异步任务后等待一段时间，然后调用master_check_ret()检查结果即可。
任务线程使用方式稍微复杂，主要要保证任务完成后将结果数据写入主线程提供的承载任务结果的数据结构时，
要保证主线程尚在等待，还没有标记超时。否则，如果主线程已经标记了超时，代表主线程可能已经开始使用
承载任务结果的数据结构了，如果此时任务线程还对这个数据结构进行修改，那么就会造成并发安全问题。
slave样例伪代码见下代码注释中。</p>
<pre tabindex="0"><code>
// 用于保存异步任务执行结果的整型状态码。
// 正数为任务成功，负数为任务失败，0代表尚未完成，可被判成超时。
class TaskResultCode {
public:
  TaskResultCode() : ival_(0) {}

  int value() const { return ival_; }

  bool unready() const { return ival_ == 0; }
  bool succeeded() const { return ival_ &gt; 0; }
  bool failed() const { return ival_ &lt; 0; }

  template &lt;int i = 1&gt;
  void set_succeeded() {
    static_assert(i &gt; 0, &quot;success code should be positive&quot;);
    ival_ = i;
  }

  template &lt;int i = -1&gt;
  void set_failed() {
    static_assert(i &lt; 0, &quot;failure code should be negative&quot;);
    ival_ = i;
  }

private:
  std::atomic&lt;int&gt; ival_;
};


// 异步任务同步工具。主线程为master，任务线程为slave。
// 主线程发送异步任务时，打包一个SyncKit用作同步，同时还可以传入一个共享数据结构，
// 用于让slave把任务执行结果数据保存在此。
class SyncKit {
public:
  SyncKit() = default;

  // 主线程master检查异步任务执行结果，如果尚未完成则标记已经超时。
  const TaskResultCode&amp; master_check_ret() {
    if (task_done_) {
      return ret_;
    }
    is_timeout_ = true;
    if (slave_checking_timeout_) {
      while (!task_done_) {}  // waiting
      return ret_;
    }
    return ret_;
  }

  // 主线程检master查任务结果，但不标记超时。
  const TaskResultCode&amp; master_peek_ret() { return ret_; }

  /**
   * slave code example:
   *
   * if slave_test_timeout():
   *   return
   * if invalid parameters or conditions:
   *   slave_set_failed_unsafe&lt;some failure code&gt;
   *
   * slave starts to run a task。 e.g. do some RPC.
   * 
   * // 异步任务已经完成，准备将任务结果写回到与master共享的数据结构中。
   * // 写之前先判断master是否已经标记超时。
   * if slave_check_whether_timeout():
   *     return
   * 
   * // 尚未超时，master还在等待。此后的代码逻辑必须保证slave一定会调用
   * // slave_set_failed&lt;failure code&gt;()或slave_set_succeeded&lt;success code&gt;()
   * // 并最终对 task_done_ 赋值为true，否则可能阻塞主线程。
   * 
   * if task failed:
   *     slave writes failed result to shared data or does nothing.
   *     slave_set_failed&lt;some failure code&gt;()
   * else:
   *     slave writes succeeded result to shared data.
   *     slave_set_succeeded&lt;some success code&gt;()
   *
   */

  // 任务线程slave检查主线程master是否已经标记超时。如果已经标记为超时，
  // 则slave不能再对与master共享的数据结构做任何修改，因为此时master可能正在读取这些数据。
  // 任务线程slave在修改与master共享的数据结构之前，必须调用此方法确保尚未超时。
  bool slave_check_whether_timeout() {
    slave_checking_timeout_ = true;
    if (is_timeout_) {
      task_done_ = true;
      return true;
    } else {
      return false;
    }
  }

  bool slave_test_timeout() const { return is_timeout_; }

  template &lt;int failure_code = -1&gt;
  void slave_set_failed() {
    ret_.set_failed&lt;failure_code&gt;();
    task_done_ = true;
  }

  template &lt;int success_code = 1&gt;
  void slave_set_succeeded() {
    ret_.set_succeeded&lt;success_code&gt;();
    task_done_ = true;
  }

  // use default code 1 for succeeded and -1 for failed.
  void slave_set_ret(bool succeeded) {
    if (succeeded) {
      slave_set_succeeded();
    } else {
      slave_set_failed();
    }
  }

  // unsafe, could call this without calling slave_check_whether_timeout first.
  // 但是可能导致master观测到的TaskResultCode变化一次，从0变为负数。
  template &lt;int failure_code = -1&gt;
  void slave_set_failed_unsafe() {
    if (!is_timeout_) {
      ret_.set_failed&lt;failure_code&gt;();
    }
    task_done_ = true;
  }

private:
  std::atomic&lt;bool&gt; is_timeout_{false};
  std::atomic&lt;bool&gt; slave_checking_timeout_{false};
  std::atomic&lt;bool&gt; task_done_{false};
  TaskResultCode ret_;
};



// 以下是一些配套工具代码

typedef std::shared_ptr&lt;SyncKit&gt; SyncKitPtr;

inline SyncKitPtr new_sk() { return std::make_shared&lt;SyncKit&gt;(); }

struct SyncKitGuard {
  SyncKitPtr sk;
  std::string name;

  SyncKitGuard() : sk(new_sk()) {}

  SyncKitGuard(std::string n) : sk(new_sk()), name(std::move(n)) {}

  SyncKitGuard(std::string n, SyncKitPtr orther_sk) : sk(orther_sk), name(
      std::move(n)) { assert(sk != nullptr); }

  SyncKitGuard(SyncKitGuard&amp;&amp; r) : sk(std::move(r.sk)),
                                   name(std::move(r.name)) { r.sk = nullptr; }

  SyncKitGuard(const SyncKitGuard&amp; r) = delete;

  ~SyncKitGuard() {
    if (sk) sk-&gt;master_check_ret();
  }
};

struct SyncKitGuardList : public std::list&lt;SyncKitGuard&gt; {
  SyncKitGuard&amp; new_back(std::string name = &quot;&quot;) {
    push_back(SyncKitGuard(std::move(name)));
    return back();
  }
};

struct SyncKitGuardMap : public std::map&lt;std::string, SyncKitGuard&gt; {};

</code></pre>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">李双全</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
      2022-04-18
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">Reward</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/reward/wechatpay-qr-code.png">
        <span>Wechat</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/reward/alipay-qr-code.png">
        <span>Alipay</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://peacalm.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/">多线程同步</a>
          <a href="https://peacalm.github.io/tags/%E5%BC%82%E6%AD%A5/">异步</a>
          <a href="https://peacalm.github.io/tags/%E5%BB%B6%E6%97%B6%E6%8E%A7%E5%88%B6/">延时控制</a>
          <a href="https://peacalm.github.io/tags/rpc/">RPC</a>
          
        </div>

      
      <nav class="post-nav">
        
        
          <a class="next" href="/post/what-is-a-good-local-cache/">
            <span class="next-text nav-default">What Is a Good Local Cache</span>
            <span class="prev-text nav-mobile">Next</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "peacalm/comments-for-peacalm.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:lishq991@gmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="http://github.com/peacalm" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="https://peacalm.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">

  <span class="copyright-year">
    &copy;
    2022<span class="author">
        李双全
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>












</body>
</html>
